<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec='http://www.thymeleaf.org/extras/spring-security'>
<head>
    <th:block th:include="fragments/header"></th:block>
</head>
<body>
<header>
    <th:block th:include="fragments/nav"></th:block>
</header>
<main>
    <div class="container bg-blur rounded mt-4 mb-4">
        <h1>Cart</h1>
        <div th:object="${products}" class="row mt-4 mb-4">
            <div class="col-7 bg-dark rounded m-auto" style="height: 30vh; overflow: auto">
                <h3 class="mySticky bg-gray text-dark rounded">Products</h3>
                <div th:each="p : ${products}" class="mt-3 rounded badge-info" >
                    <span th:text="|Product: ${p.title}, Quantity: ${p.quantity}
                     Total Price: ${#numbers.formatDecimal(p.totalPrice, 0, 'COMMA', 2, 'POINT')}|">Category Details</span>
                    <a class="ml-3 text-danger" th:href="@{/cart/remove(title = ${p.title})}">Remove</a>
                </div>
        </div>
        </div>
        <a th:href="@{/cart/buy/all}" class="btn btn-danger"
           th:text="|Buy all products for
          ${#numbers.formatDecimal(price, 0, 'COMMA', 2, 'POINT')} lv|"></a>
    </div>
</main>
<footer class="footer bg-dark  py-2">
    <th:block th:include="fragments/footer"></th:block>
</footer>
</body>
</html>