<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec='http://www.thymeleaf.org/extras/spring-security'>
<head>
    <th:block th:include="fragments/header" ></th:block>
</head>
<body>
<header>
    <th:block th:include="fragments/nav" ></th:block>
</header>
<main>
    <div class="container bg-blur rounded mt-5 mb-4">
        <h1>Admin Panel</h1>
        <div class="row mt-3 mb-3">
            <div class="col-5 bg-dark rounded m-auto" style="height: 30vh; overflow: auto">
                <a class="ml-3 text-danger mySticky bg-gray rounded" href="/categories/create">Add Category</a>
                <h3 class="mySticky bg-gray text-dark rounded" >Categories</h3>
                <div class="mt-3 rounded badge-info" th:each="c : ${categories}">
                    <span th:text="${c.name}">Category Details</span>
                    <a class="ml-3 text-danger" th:href ="@{/categories/details(id = *{c.id})}">Details</a>
                </div>
            </div>
            <div class="col-5 bg-dark rounded m-auto" style="height: 30vh; overflow: auto">
                <a class="ml-3 text-danger mySticky bg-gray rounded" href="/products/add">Add Product</a>
                <h3 class="mySticky bg-gray text-dark rounded">Products</h3>
                <div class="mt-3 rounded badge-warning" th:each="p : ${products}">
                    <span th:text="${p.title}">Product Details</span>
                    <a class="ml-3 text-danger"th:href ="@{/products/details(id = *{p.id})}">Details</a>
                </div>
            </div>
        </div>
        <div  sec:authorize="hasRole('ROOT_ADMIN')" class="row mt-3 mb-3">
            <div class="col-5 bg-dark rounded m-auto" style="height: 30vh; overflow: auto">
                <h3 class="mySticky bg-gray text-dark rounded">Users</h3>
                <div class="mt-3 rounded badge-success" th:each="u : ${users}">
                    <span th:text="${u.username}">User Details</span>
                    <a class="ml-3 text-danger" th:href ="@{/users/details/admin(id = *{u.id})}">Details</a>
                </div>
            </div>
            <div class="col-5 bg-dark rounded m-auto" style="height: 30vh; overflow: auto">
                <h3 class="mySticky bg-gray text-dark rounded">Messages</h3>
                <div class="mt-3 rounded badge-secondary" th:each="m : ${messages}">
                    <span th:text="*{m.getSubject()}">Message Details</span>
                    <a class="ml-3 text-danger" th:href="@{/messages/details(id = *{m.id})}">Read</a>
                </div>
            </div>
        </div>

</main>
<footer class="footer bg-dark  py-2">
    <th:block th:include="fragments/footer" ></th:block>
</footer>
</body>
</html>